{% extends 'home/base.html' %}
{% block content %}
<link
  rel="stylesheet"
  href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
  integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
  crossorigin="anonymous"
/>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
  integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
  crossorigin="anonymous"
></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<body>


<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
         /* Set the size of the div element that contains the map */
         #map {
        height: 350px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
* {
  box-sizing: border-box;
}
.grid {
  border: 1px solid red;
  display: grid;
  grid-template-columns: 50% 50%;
  grid-auto-rows: 70vh;
}

.item {
  border: 1px solid black;
}

.column {
  width: 750px;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

.reviewForm {
  background-color: rgb(47, 131, 124);
  border-radius: 5px;
  padding-top: 5px;
  padding-left: 5px;
  padding-bottom: 5px;
}

.h1Wrapper {
  background-color: rgb(47, 131, 124);
  border-radius: 5px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 5px;
  margin-top: 5px;
  margin-bottom: 5px;
  margin-left: 5px;
  width: 98%;
}

.h2Wrapper {
  background-color: rgb(47, 131, 124);
  border-radius: 5px;
  padding-top: 5px;
  padding-bottom: 5px;
  margin-top: 5px;
  margin-right: 5px;
  text-align: center;
}

.buttonArea {
  margin-bottom: 5px;
  border-radius: 5px;
}

.collapseClass {
  background-color: rgb(47, 131, 124);
  border-radius: 5px;
  text-align: center;
}

.rowElements {
  background-color: rgb(110, 216, 207);
  border-radius: 5px;
  text-align: center;
  margin-left: 30px;
  margin-top: 5px;
}

.rowElements2 {
  background-color: rgb(110, 216, 207);
  border-radius: 5px;
  text-align: center;

}

</style>
<div class="grid">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
  </div>
  <h1>Reviews</h1>
</div>
<div class="container">
<div class="row">
<div class="col"
    style="padding: 0%">
  <div class="h2Wrapper" style="width: 100%;">
      <h2>Select filters</h2>
  </div>
    <P ALIGN=RIGHT>
            <form class="reviewForm" method="get">
                <fieldset class="form-group">
                    <div class="row">
                      <legend class="col-form-label col-sm-3 pt-0">Min Stars</legend>
                      <div class="col-sm-9">
                        <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="stars"
                            id="stars1"
                            value="1"
                            {% if stars == "1" %}
                              checked
                            {% endif %}
                          />
                          <label class="form-check-label" for="stars1">
                            1
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="stars"
                            id="stars2"
                            value="2"
                            {% if stars == "2" %}
                            checked
                          {% endif %}
                          />
                          <label class="form-check-label" for="stars2">
                            2
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="stars"
                            id="stars3"
                            value="3"
                            {% if stars == "3" %}
                            checked
                          {% endif %}
                          />
                          <label class="form-check-label" for="stars3">
                            3
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="stars"
                            id="stars4"
                            value="4"
                            {% if stars == "4" %}
                            checked
                          {% endif %}
                          />
                          <label class="form-check-label" for="stars4">
                            4
                          </label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="stars"
                            id="stars5"
                            value="5"
                            {% if stars == "5" %}
                            checked
                          {% endif %}
                          />
                          <label class="form-check-label" for="stars5">
                            5
                          </label>
                        </div>
                      </div>
                    </div>
                  </fieldset>

                    <div class="form-group row">
                        <div class="col-3">
                          <label for="ex1">Min Price</label>
                          <input
                          class="form-control"
                          type="number"
                          min="0.00"
                          max="2500"
                          step="0.01"
                          value="{{min_price}}"
                          name="min_price"
                          id="minPrice"
                          size="8"
                        />
                        </div>
                        <div class="col-3">
                          <label for="ex2">Max Price</label>
                          <input
                          class="form-control"
                          type="number"
                          min="0.00"
                          max="2500"
                          step="0.01"
                          value="{{max_price}}"
                          name="max_price"
                          id="maxPrice"
                          size="8"
                        />
                        </div>

                      </div> 
                        
                      <div class="form-group row">
                          <div class="col-3">
                            <label for="ex1">Bedrooms Min</label>
                            <input
                            class="form-control"
                            type="number"
                            min="0"
                            max="10"
                            step="1"
                            value="{{min_bed}}"
                            name="min_bed"
                          />
                          </div>
                          <div class="col-3">
                              <label for="ex1">Bedrooms Max</label>
                              <input
                              class="form-control"
                              type="number"
                              min="0"
                              max="10"
                              step="1"
                              value="{{max_bed}}"
                              name="max_bed"
                            />
                            </div>
                          <div class="col-3">
                            <label for="ex2">Bathrooms Min</label>
                            <input
                            class="form-control"
                            type="number"
                            min="0"
                            step="1"
                            max="10"
                            value="{{min_bath}}"
                            name="min_bath"
                          />
                          </div>
                          <div class="col-3">
                              <label for="ex2">Bathrooms Max</label>
                              <input
                              class="form-control"
                              type="number"
                              min="0"
                              step="1"
                              max="10"
                              value="{{max_bath}}"
                              name="max_bath"
                            />
                            </div>
  
                        </div> 
                    
                        <div class="form-group row">
                            <legend class="col-form-label col-sm-3 pt-0">Utilities</legend>
                            {%for util in utilities%}
                            <div class="col-3 form-check">
                              <input
                                class="form-check-input"
                                type="checkbox"
                                id="{{ util }}"
                                name="{{ util }}"
                                value="{{ util }}"
                                {% if util in util_arr %}
                                checked
                              {% endif %}
                              />
                              <label class="form-check-label" for="{{ util }}">
                                {{ util }}
                              </label>
                            </div>
                            {%endfor%}
                        </div> 

                        <div class="form-group row">
                            <legend class="col-form-label col-sm-3 pt-0">Neighborhoods</legend>
                            {% for hood in neighborhoods %}
                            <div class="col-3 form-check">
                              <input
                                class="form-check-input"
                                type="checkbox"
                                id="{{ hood }}"
                                name="{{ hood }}"
                                value="{{ hood }}"
                                {% if hood in hood_arr %}
                                checked
                              {% endif %}
                              />
                              <label class="form-check-label" for="{{ hood }}">
                                {{ hood }}
                              </label>
                            </div>
                            {%endfor%}
                        </div> 

                        <div class="form-group row">
                            <legend class="col-form-label col-sm-3 pt-0">Amenities</legend>
                            {% for amen in amenities %}
                            <div class="col-3 form-check">
                              <input
                                class="form-check-input"
                                type="checkbox"
                                id="{{ amen }}"
                                name="{{ amen }}"
                                value="{{ amen }}"
                                {% if amen in amen_arr %}
                                checked
                              {% endif %}
                              />
                              <label class="form-check-label" for="{{ amen }}">
                                {{ amen }}
                              </label>
                            </div>
                            {%endfor%}
                        </div> 
                <input type="submit" value="Submit"><br>
              </form>
    </P>
    <!--The div element for the map -->
<div id="map"></div>
<script>
// Initialize and add the map
function initMap() { //38.0358961,-78.5066878
  // The location of newcomb 38.0359236,-78.5088001
  var newc = {lat: 38.0359236, lng: -78.5088001};
  // The map, centered at newc
  var map = new google.maps.Map(
      document.getElementById('map'), {zoom: 15, center: newc});
  // The marker, positioned at newc
  // var marker = new google.maps.Marker({position: newc, map: map});
  //make grandmarc 38.037213,-78.5015677
  // var grandmarc = {lat: 38.037213, lng: -78.5015677};
  // var marker = new google.maps.Marker({position: grandmarc, map:map});
  //add variable location
  // var varLoc = {lat:{{lat}}, lng:{{lng}}};
  // var marker = new google.maps.Marker({position: varLoc, map: map})
{% for review in object_list %}
  console.log("yeep");
  // console.log( {{review}} );
  console.log(decodeHtml('{{review.location}}'));
  if (!('{{review.location}}' === 'None'))
  {
    var pos = decodeHtml('{{review.location}}');
    var posR = pos.replace(/'/g, "\"");
    console.log("Pos: " + posR);
    var posObj = JSON.parse(posR);
    var marker = new google.maps.Marker({position: posObj, map:map });
  }
{% endfor %}
}
function decodeHtml(html) {
    var txt = document.createElement("textarea");
    txt.innerHTML = html;
    return txt.value;
}
</script>
<!--Load the API from the specified URL
* The async attribute allows the browser to render the page while the API loads
* The key parameter will contain your own API key (which is not needed for this tutorial)
* The callback parameter executes the initMap() function
-->
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLDfHtyt6C7NqimxtXZ8imfqHinj_dVNY&callback=initMap">
</script>
</div>
<div></div>
<div class="col">
{% for review in object_list %}
<div class="collapseClass">
        <div class="row"
            style="transform: translate(0%,0%);"> <!--  START FIRST ROW OF REVIEW -->
          <div class="col-3 rowElements">
              <b>Price: {{ review.price }}</b>
          </div>
          <div class="col-3 rowElements">
              <b>Bedrooms: {{ review.bedrooms }}</b>
          </div>
          <div class="col-3 rowElements">
              <b>Stars: {{ review.stars }}</b>
          </div>
        </div> <!--  END FIRST ROW OF REVIEW -->
        <div class="row" style="width: 90%; transform: translate(5%, 0%);"> <!--  START SECOND ROW OF REVIEW -->
        <div class="col-8 rowElements2">
            <b>Address: {{ review.address }}</b>
        </div>
        <div class="col-4">
            <nav class="navbar navbar-dark bg-dark buttonArea"
                style="margin-right: 5px; transform: translate(10%, 0%);">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#a{{ review.pk }}" aria-controls="{{ review.stars }}" aria-expanded="false" aria-label="Toggle navigation"
                    style="transform: translate(50%,0%);">
                  <span class="navbar-toggler-icon"></span>
                </button>
              </nav>
        </div>
        </div> <!-- END ROW FOR EXPANSION -->
        <div class="row justify-content-center">
            <div class="pos-f-t"
                style="display: inline-block; width: 90%;">
                <div class="collapse" id="a{{ review.pk }}">
                  <div class="bg-dark p-4"
                      style="margin-bottom: 10px; border-radius: 5px; margin-left: 0%; margin-right: 0%;">
                    <ul class ="list-group">
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Neighboorhood</b> - {{ review.neighborhood }}</li>
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Number of bathrooms</b> - {{ review.bathrooms }}</li>
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Approximate distance</b> to Newcomb - {{ review.distance_to_newcomb }}</li>
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Cost of utilities</b> - {{ review.utilities_cost }}</li>
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Included utilities</b> - {{ review.utilities }}</li>
                      <li class="list-group-item" style="background-color: rgb(110, 216, 207);"><b>Included amenities</b> - {{ review.amenities }}</li>
                  </div>
                </div>
              </div>
        </div>
</div>
<!--END COL-->

    <br>
{% empty %}
    <li>No Reviews yet.</li>
{% endfor %}
</div>
</div>
</body>
{% endblock %}